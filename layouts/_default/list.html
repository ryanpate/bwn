{{- define "main" }}

{{- if .IsHome }}
<!-- Hero Section for Homepage Only -->
{{- partial "home-info.html" . }}

<!-- News Header directly after hero -->
{{- partial "news-header.html" . }}
{{- end }}

<!-- Post List -->
{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- $paginator := .Paginate $pages }}

<div class="post-list">
  {{- range $paginator.Pages }}
  <article class="post-entry">
    <header class="entry-header">
      <h2>
        <a href="{{ .Permalink }}" aria-label="{{ .Title | plainify }}">
          {{- .Title -}}
        </a>
      </h2>
    </header>
    <div class="entry-content">
      <p>
        {{- if .Params.summary }}
        {{- .Params.summary | plainify | htmlUnescape -}}
        {{- else if .Summary }}
        {{- .Summary | plainify | htmlUnescape | truncate 200 -}}
        {{- else }}
        {{- .Description | plainify | htmlUnescape | truncate 200 -}}
        {{- end -}}
      </p>
    </div>
    <footer class="entry-footer">
      <span class="post-date">{{ .Date.Format "January 2, 2006" }}</span>
      <span class="read-time"> · {{ math.Round (div (countwords .Content) 200.0) }} min</span>
      {{- if .Params.categories }}
      <span class="post-category"> · {{ index .Params.categories 0 }}</span>
      {{- end }}
    </footer>
    <a class="entry-link" href="{{ .Permalink }}"></a>
  </article>
  {{- end }}
</div>

{{- template "_internal/pagination.html" . }}

{{- end }}{{/* end main */}}