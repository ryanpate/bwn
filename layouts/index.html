{{ define "head" }}
<style>
    /* Hero Section */
    .hero {
        background: linear-gradient(135deg,
                rgba(139, 92, 246, 0.3) 0%,
                rgba(124, 58, 237, 0.2) 25%,
                rgba(91, 33, 182, 0.15) 50%,
                rgba(236, 72, 153, 0.2) 75%);
        border-radius: 20px;
        padding: 4rem 2rem;
        margin: 2rem auto;
        max-width: var(--max-width);
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background:
            linear-gradient(rgba(255, 255, 255, 0.01) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.01) 1px, transparent 1px);
        background-size: 60px 60px;
        opacity: 0.4;
    }

    .hero-content {
        position: relative;
        z-index: 1;
    }

    .hero-title {
        font-size: 3.5rem;
        font-weight: 800;
        background: linear-gradient(135deg, #a78bfa, #ec4899);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
        letter-spacing: -0.03em;
    }

    .hero-subtitle {
        font-size: 1.25rem;
        color: var(--text-muted);
        margin-bottom: 3rem;
    }

    .hero-badges {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 3rem;
        flex-wrap: wrap;
    }

    .badge {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        padding: 0.5rem 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        backdrop-filter: blur(10px);
    }

    /* Price Grid */
    .price-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 1rem;
        margin: 3rem 0;
        min-height: 120px;
    }

    .price-card {
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        padding: 1.25rem;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .price-card:hover {
        background: rgba(139, 92, 246, 0.15);
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(139, 92, 246, 0.25);
    }

    /* Loading skeleton animation */
    .price-card.loading {
        background: linear-gradient(90deg,
                rgba(255, 255, 255, 0.05) 25%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0.05) 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
    }

    @keyframes loading {
        0% {
            background-position: 200% 0;
        }

        100% {
            background-position: -200% 0;
        }
    }

    .price-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
    }

    .coin-name {
        color: var(--text-muted);
        font-size: 0.85rem;
    }

    .coin-symbol {
        color: var(--primary);
        font-weight: 600;
        font-size: 0.9rem;
    }

    .price-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: white;
        margin-bottom: 0.25rem;
    }

    .price-change {
        font-size: 0.9rem;
        font-weight: 500;
    }

    .price-change.positive {
        color: #10b981;
    }

    .price-change.negative {
        color: #ef4444;
    }

    .price-error {
        grid-column: 1 / -1;
        text-align: center;
        color: var(--text-muted);
        padding: 2rem;
    }

    .retry-button {
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background: rgba(139, 92, 246, 0.2);
        border: 1px solid rgba(139, 92, 246, 0.4);
        border-radius: 8px;
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .retry-button:hover {
        background: rgba(139, 92, 246, 0.3);
        transform: translateY(-2px);
    }

    /* CTA Section */
    .cta-container {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .cta-button {
        padding: 1rem 2rem;
        font-size: 1rem;
        font-weight: 600;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
    }

    .cta-primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
    }

    .cta-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(139, 92, 246, 0.5);
    }

    .cta-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
    }

    .cta-secondary:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
    }

    /* News Section */
    .news-section {
        margin: 4rem 0;
    }

    .section-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .section-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .section-subtitle {
        color: var(--text-muted);
    }

    .articles-grid {
        display: grid;
        gap: 1.5rem;
    }

    .article-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.5rem;
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .article-card:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateX(4px);
        box-shadow: 0 10px 40px rgba(139, 92, 246, 0.15);
    }

    .article-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        line-height: 1.4;
    }

    .article-excerpt {
        color: var(--text-muted);
        line-height: 1.6;
        margin-bottom: 1rem;
    }

    .article-meta {
        display: flex;
        gap: 1rem;
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.875rem;
    }

    /* Ad Styles */
    .homepage-ad,
    .in-feed-ad {
        margin: 2rem 0;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        min-height: 100px;
        position: relative;
    }

    .homepage-ad::before,
    .in-feed-ad::before {
        content: 'Advertisement';
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        background: #0a0e27;
        padding: 0 0.5rem;
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.3);
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    /* Responsive */
    @media (max-width: 1200px) {
        .price-grid {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    @media (max-width: 900px) {
        .price-grid {
            grid-template-columns: repeat(3, 1fr);
        }

        .hero-title {
            font-size: 2.5rem;
        }
    }

    @media (max-width: 600px) {
        .price-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .hero-title {
            font-size: 2rem;
        }

        .hero {
            padding: 2rem 1rem;
        }
    }
</style>
{{ end }}

{{ define "main" }}
<div class="container">
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">REAL-TIME CRYPTO INTELLIGENCE</h1>
            <p class="hero-subtitle">Your trusted source for breaking crypto news and market analysis</p>

            <div class="hero-badges">
                <div class="badge">
                    <span style="color: #10b981;">‚óè</span>
                    24/7 Coverage
                </div>
                <div class="badge">
                    üìä Deep Analysis
                </div>
                <div class="badge">
                    ‚ö° Breaking News
                </div>
            </div>

            <!-- Dynamic Price Ticker Grid -->
            <div class="price-grid" id="hero-price-grid">
                <!-- Loading skeletons will be shown initially -->
                <div class="price-card loading">
                    <div class="price-header">
                        <span class="coin-name">Loading...</span>
                        <span class="coin-symbol">...</span>
                    </div>
                    <div class="price-value">--</div>
                    <div class="price-change">--</div>
                </div>
                <div class="price-card loading">
                    <div class="price-header">
                        <span class="coin-name">Loading...</span>
                        <span class="coin-symbol">...</span>
                    </div>
                    <div class="price-value">--</div>
                    <div class="price-change">--</div>
                </div>
                <div class="price-card loading">
                    <div class="price-header">
                        <span class="coin-name">Loading...</span>
                        <span class="coin-symbol">...</span>
                    </div>
                    <div class="price-value">--</div>
                    <div class="price-change">--</div>
                </div>
                <div class="price-card loading">
                    <div class="price-header">
                        <span class="coin-name">Loading...</span>
                        <span class="coin-symbol">...</span>
                    </div>
                    <div class="price-value">--</div>
                    <div class="price-change">--</div>
                </div>
                <div class="price-card loading">
                    <div class="price-header">
                        <span class="coin-name">Loading...</span>
                        <span class="coin-symbol">...</span>
                    </div>
                    <div class="price-value">--</div>
                    <div class="price-change">--</div>
                </div>
            </div>

            <div class="cta-container">
                <a href="/subscribe/" class="cta-button cta-primary">
                    üìß Get Daily Briefs
                </a>
                <a href="/news/" class="cta-button cta-secondary">
                    üì∞ Latest Updates
                </a>
            </div>
        </div>
    </section>

    <!-- News Section -->
    <section class="news-section">
        <div class="section-header">
            <h2 class="section-title">Latest Crypto News</h2>
            <p class="section-subtitle">Breaking stories, market analysis, and expert insights</p>
        </div>

        <!-- Ad placement -->
        <div class="homepage-ad">
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5523870768931777"
                data-ad-slot="1234567890" data-ad-format="horizontal" data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="articles-grid">
            {{ $counter := 0 }}
            {{ range first 10 (where .Site.RegularPages "Section" "news") }}
            {{ $counter = add $counter 1 }}
            {{ if eq (mod $counter 3) 0 }}
            <!-- In-feed ad every 3 articles -->
            <div class="in-feed-ad">
                <ins class="adsbygoogle" style="display:block" data-ad-format="fluid"
                    data-ad-layout-key="-6t+ed+2i-1n-4w" data-ad-client="ca-pub-5523870768931777"
                    data-ad-slot="0987654321"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            {{ end }}

            <a href="{{ .Permalink }}" class="article-card">
                <h3 class="article-title">{{ .Title }}</h3>
                <p class="article-excerpt">{{ .Summary | truncate 150 }}</p>
                <div class="article-meta">
                    <span>{{ .Date.Format "Jan 2, 2006" }}</span>
                    <span>{{ .ReadingTime }} min read</span>
                </div>
            </a>
            {{ end }}
        </div>
    </section>
</div>

<script>
    // Crypto price configuration
    const HERO_CRYPTOS = [
        { symbol: 'BTC', name: 'Bitcoin', id: 'bitcoin' },
        { symbol: 'ETH', name: 'Ethereum', id: 'ethereum' },
        { symbol: 'SOL', name: 'Solana', id: 'solana' },
        { symbol: 'BNB', name: 'Binance', id: 'binancecoin' },
        { symbol: 'XRP', name: 'XRP', id: 'ripple' },
        { symbol: 'ADA', name: 'Cardano', id: 'cardano' },
        { symbol: 'AVAX', name: 'Avalanche', id: 'avalanche-2' },
        { symbol: 'MATIC', name: 'Polygon', id: 'matic-network' },
        { symbol: 'DOT', name: 'Polkadot', id: 'polkadot' },
        { symbol: 'LINK', name: 'Chainlink', id: 'chainlink' }
    ];

    // Function to format price based on value
    function formatPrice(price) {
        if (price >= 1000) {
            return price.toLocaleString('en-US', {
                maximumFractionDigits: 0,
                minimumFractionDigits: 0
            });
        } else if (price >= 1) {
            return price.toLocaleString('en-US', {
                maximumFractionDigits: 2,
                minimumFractionDigits: 2
            });
        } else if (price >= 0.01) {
            return price.toLocaleString('en-US', {
                maximumFractionDigits: 4,
                minimumFractionDigits: 2
            });
        } else {
            return price.toLocaleString('en-US', {
                maximumFractionDigits: 6,
                minimumFractionDigits: 4
            });
        }
    }

    // Function to fetch and display crypto prices
    async function fetchHeroPrices() {
        const priceGrid = document.getElementById('hero-price-grid');

        try {
            // Get the first 10 cryptos to display (or however many fit in your grid)
            const displayCryptos = HERO_CRYPTOS.slice(0, 10);
            const ids = displayCryptos.map(c => c.id).join(',');

            // Fetch prices from CoinGecko API
            const response = await fetch(
                `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`
            );

            if (!response.ok) {
                throw new Error('Failed to fetch prices');
            }

            const data = await response.json();

            // Clear the grid and populate with real data
            priceGrid.innerHTML = '';

            displayCryptos.forEach(crypto => {
                const coinData = data[crypto.id];

                if (coinData) {
                    const price = coinData.usd;
                    const change = coinData.usd_24h_change;

                    const card = document.createElement('div');
                    card.className = 'price-card';
                    card.innerHTML = `
                    <div class="price-header">
                        <span class="coin-name">${crypto.name}</span>
                        <span class="coin-symbol">${crypto.symbol}</span>
                    </div>
                    <div class="price-value">$${formatPrice(price)}</div>
                    <div class="price-change ${change >= 0 ? 'positive' : 'negative'}">
                        ${change >= 0 ? '‚Üë' : '‚Üì'} ${Math.abs(change).toFixed(2)}%
                    </div>
                `;

                    priceGrid.appendChild(card);
                }
            });

        } catch (error) {
            console.error('Error fetching crypto prices:', error);

            // Show error message with retry button
            priceGrid.innerHTML = `
            <div class="price-error">
                <p>Unable to load live prices</p>
                <button class="retry-button" onclick="fetchHeroPrices()">
                    Retry
                </button>
            </div>
        `;
        }
    }

    // Fetch prices when page loads
    document.addEventListener('DOMContentLoaded', function () {
        fetchHeroPrices();

        // Refresh prices every 30 seconds
        setInterval(fetchHeroPrices, 30000);
    });
</script>
{{ end }}